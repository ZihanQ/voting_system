{% extends 'layout.html' %}

{% block title %}Manage Polls{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2>Manage Polls</h2>
    
    <table class="table table-hover">
        <thead>
            <tr>
                <th>Title</th>
                <th>Creator</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for poll in polls %}
            <tr class="{% if poll.is_disabled %}table-secondary{% endif %}">
                <td>{{ poll.title }}</td>
                <td>{{ poll.creator.username }}</td>
                <td>
                    {% if poll.is_disabled %}
                        <span class="badge bg-danger">Disabled</span>
                    {% else %}
                        <span class="badge bg-success">Active</span>
                    {% endif %}
                </td>
                <td>
                    <a href="{{ url_for('poll.poll_results', poll_id=poll.id) }}" 
                       class="btn btn-sm btn-info">Results</a>
                    <a href="{{ url_for('admin.toggle_poll', poll_id=poll.id) }}" 
                       class="btn btn-sm {% if poll.is_disabled %}btn-warning{% else %}btn-danger{% endif %}">
                        {% if poll.is_disabled %}Enable{% else %}Disable{% endif %}
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}